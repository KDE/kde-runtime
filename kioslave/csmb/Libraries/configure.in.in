#MIN_CONFIG

AC_ARG_ENABLE(encrypt-pass,[ --disable-encrypt-pass Disable Encrypted Passwords],,enableval="yes")

if test "$enableval" != "no"; then
	AC_DEFINE(PAM_SMB_ENC_PASS)
	AC_MSG_RESULT(Will compile with encrypted password support)
else
	AC_MSG_RESULT(Will compile without encrypted password support)
fi


AC_MSG_CHECKING(for LOG_AUTHPRIV)
AC_EGREP_CPP(yes, 
[#include <syslog.h>
 #ifdef LOG_AUTHPRIV
  yes
 #endif
], has_logauthpriv=yes, has_logauthpriv=no)
AC_MSG_RESULT($has_logauthpriv)
if test "$has_logauthpriv" != "yes"; then
	AC_DEFINE(USE_LOGAUTH)
fi

AC_CHECK_HEADERS(shadow.h security/pam_appl.h security/pam_modules.h)

AC_EGREP_HEADER(uid_t, sys/types.h, ac_cv_type_uid_t=yes, ac_cv_type_uid_t=no)
AC_MSG_RESULT($ac_cv_type_uid_t)
if test "$ac_cv_type_uid_t" != "yes"; then
	AC_DEFINE(uid_t, int)
	AC_DEFINE(gid_t, int)
fi

