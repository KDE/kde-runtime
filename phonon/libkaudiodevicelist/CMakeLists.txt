ALSA_VERSION_STRING(ALSA_VERSION_STR)
SET(HAVE_CURRENT_ALSA FALSE)
IF(ALSA_VERSION_STR AND NOT WIN32)
   IF(ALSA_VERSION_STR MATCHES "^1\\.(0\\.(1[4-9]|[2-9][0-9]+)|[1-9][0-9]*\\.)")
      ADD_DEFINITIONS(-DHAS_LIBASOUND_DEVICE_NAME_HINT)
      SET(HAVE_CURRENT_ALSA TRUE)
   ENDIF(ALSA_VERSION_STR MATCHES "^1\\.(0\\.(1[4-9]|[2-9][0-9]+)|[1-9][0-9]*\\.)")
ENDIF(ALSA_VERSION_STR AND NOT WIN32)
if(NOT WIN32)
   macro_log_feature(HAVE_CURRENT_ALSA "ALSA" "The Advanced Linux Sound Architecture (ALSA) library" "http://www.alsa-project.org/" FALSE "1.0.14a" "A current ALSA library is needed for dmix and virtual device listing")
endif(NOT WIN32)

include_directories(${ALSA_INCLUDES})

set(kaudiodevicelist_LIB_SRCS
    audiodevice.cpp
    audiodeviceenumerator.cpp
    hardwaredatabase.cpp
   )

if(ALSA_FOUND)
   qt4_add_resources(kaudiodevicelist_LIB_SRCS resources.qrc)
endif(ALSA_FOUND)

kde4_add_library(kaudiodevicelist SHARED ${kaudiodevicelist_LIB_SRCS})
target_link_libraries(${KDE4_KAUDIODEVICELIST_LIBS})

set_target_properties(kaudiodevicelist PROPERTIES VERSION ${GENERIC_LIB_VERSION} SOVERSION ${GENERIC_LIB_SOVERSION})

install(TARGETS kaudiodevicelist ${INSTALL_TARGETS_DEFAULT_ARGS})
#install(FILES
#        kaudiodevicelist_export.h
#        audiodevice.h
#        audiodeviceenumerator.h
#        DESTINATION ${INCLUDE_INSTALL_DIR}/phonon COMPONENT Devel)

install(FILES hardwaredatabase DESTINATION ${DATA_INSTALL_DIR}/libphonon)
